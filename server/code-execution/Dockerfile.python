FROM python:3.9-alpine

WORKDIR /app

# Create a non-root user for security
RUN addgroup -S coderunner && adduser -S coderunner -G coderunner
USER coderunner

# Copy the code and input files
COPY --chown=coderunner:coderunner ./code.py /app/
COPY --chown=coderunner:coderunner ./input.txt /app/

# Run the code with a timeout
CMD ["sh", "-c", "cat input.txt | python code.py"]
